const { test } = require('@playwright/test'); test('final seller test', async ({ page }) => { await page.goto('http://localhost:1337/admin/auth/login'); await page.waitForLoadState('networkidle'); await page.fill('input[name=\
email\]', 'joy@joy.vn'); await page.fill('input[name=\password\]', 'p*yBHdqG2sr9'); await page.click('button[type=\submit\]'); try { await page.waitForURL('**/admin', { timeout: 30000 }); } catch (e) { if (page.url().includes('/admin')) console.log('At admin'); } console.log('Going to create page...'); await page.goto('http://localhost:1337/admin/content-manager/collection-types/api::item.item/create?plugins%5Bi18n%5D%5Blocale%5D=en'); await page.waitForLoadState('networkidle'); page.on('console', msg => { if (msg.text().includes('detectListingTypeId') || msg.text().includes('Seller')) console.log('Console:', msg.text()); }); await page.click('[data-strapi-field-name=\ListingType\] button'); await page.waitForTimeout(1000); const seller = page.locator('text=Seller').first(); if (await seller.isVisible()) { console.log('Found Seller, clicking...'); await seller.click(); await page.waitForTimeout(3000); } });
