const { test } = require('@playwright/test'); test('test seller v1.0.7 fix', async ({ page }) => { await page.goto('http://localhost:1337/admin/auth/login'); await page.waitForLoadState('networkidle'); await page.fill('input[name=\
email\]', 'joy@joy.vn'); await page.fill('input[name=\password\]', 'p*yBHdqG2sr9'); await page.click('button[type=\submit\]'); try { await page.waitForURL('**/admin', { timeout: 30000 }); } catch (e) { if (page.url().includes('/admin')) console.log('‚úÖ At admin page'); } console.log('‚úÖ Login successful'); await page.goto('http://localhost:1337/admin/content-manager/collection-types/api::item.item/create?plugins%5Bi18n%5D%5Blocale%5D=en'); await page.waitForLoadState('networkidle'); await page.waitForTimeout(3000); const version = await page.locator('div:has-text(\Smart
Filter
v1.0.7\)').first(); if (await version.isVisible()) { console.log('‚úÖ Plugin v1.0.7 loaded successfully'); } else { console.log('‚ö†Ô∏è Plugin version not visible yet'); } page.on('console', msg => { if (msg.text().includes('Strategy 0 (API)') || msg.text().includes('Found ID') || msg.text().includes('Seller')) { console.log('üéØ Plugin:', msg.text()); } }); await page.click('[data-strapi-field-name=\ListingType\] button'); await page.waitForTimeout(1000); const seller = page.locator('text=Seller').first(); if (await seller.isVisible()) { console.log('‚úÖ Found Seller option'); await seller.click(); await page.waitForTimeout(3000); console.log('‚úÖ Selected Seller - checking if plugin detects correct ID...'); } else { console.log('‚ùå Seller option not found'); } });
